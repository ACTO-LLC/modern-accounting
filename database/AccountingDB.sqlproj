<?xml version="1.0" encoding="utf-8"?>
<!--
  SQL Server Database Project

  This project defines the AccountingDB schema. It can be used for:
  - Schema visualization in Visual Studio/Azure Data Studio
  - Building DACPAC files for deployment
  - Schema comparison between environments

  Build Requirements:
  - Visual Studio with SQL Server Data Tools (SSDT), OR
  - Microsoft.Build.Sql SDK for dotnet build

  If neither is available, use the Node.js deployment mode:
    node scripts/deploy-db.js (with the node flag)
-->
<Project DefaultTargets="Build">
  <Sdk Name="Microsoft.Build.Sql" Version="0.2.0-preview" />
  <PropertyGroup>
    <Name>AccountingDB</Name>
    <DSP>Microsoft.Data.Tools.Schema.Sql.SqlAzureV12DatabaseSchemaProvider</DSP>
    <ModelCollation>1033, CI</ModelCollation>
    <!-- Disable auto-include of SQL files -->
    <EnableDefaultItems>false</EnableDefaultItems>
    <EnableDefaultSqlItems>false</EnableDefaultSqlItems>
  </PropertyGroup>
  <ItemGroup>
    <!-- Tables -->
    <Build Include="dbo\Tables\Accounts.sql" />
    <Build Include="dbo\Tables\BankReconciliations.sql" />
    <Build Include="dbo\Tables\BankTransactions.sql" />
    <Build Include="dbo\Tables\BillLines.sql" />
    <Build Include="dbo\Tables\Bills.sql" />
    <Build Include="dbo\Tables\Classes.sql" />
    <Build Include="dbo\Tables\Customers.sql" />
    <Build Include="dbo\Tables\EstimateLines.sql" />
    <Build Include="dbo\Tables\Expenses.sql" />
    <Build Include="dbo\Tables\Estimates.sql" />
    <Build Include="dbo\Tables\InventoryLocations.sql" />
    <Build Include="dbo\Tables\InventoryTransactions.sql" />
    <Build Include="dbo\Tables\InvoiceLines.sql" />
    <Build Include="dbo\Tables\Invoices.sql" />
    <Build Include="dbo\Tables\JournalEntries.sql" />
    <Build Include="dbo\Tables\JournalEntryLines.sql" />
    <Build Include="dbo\Tables\Locations.sql" />
    <Build Include="dbo\Tables\ProductsServices.sql" />
    <Build Include="dbo\Tables\Projects.sql" />
    <Build Include="dbo\Tables\PurchaseOrderLines.sql" />
    <Build Include="dbo\Tables\PurchaseOrders.sql" />
    <Build Include="dbo\Tables\Receipts.sql" />
    <Build Include="dbo\Tables\ReconciliationItems.sql" />
    <Build Include="dbo\Tables\RecurringSchedules.sql" />
    <Build Include="dbo\Tables\RecurringTemplates.sql" />
    <Build Include="dbo\Tables\TimeEntries.sql" />
    <Build Include="dbo\Tables\Vendors.sql" />
    <!-- Views -->
    <Build Include="dbo\Views\v_Bills.sql" />
    <Build Include="dbo\Views\v_Estimates.sql" />
    <Build Include="dbo\Views\v_Expenses.sql" />
    <Build Include="dbo\Views\v_InvoiceLines.sql" />
    <Build Include="dbo\Views\v_Invoices.sql" />
    <Build Include="dbo\Views\v_Projects.sql" />
    <Build Include="dbo\Views\v_PurchaseOrders.sql" />
    <Build Include="dbo\Views\v_Receipts.sql" />
    <Build Include="dbo\Views\v_TimeEntries.sql" />
    <!-- Stored Procedures -->
    <Build Include="dbo\StoredProcedures\CreateInvoice.sql" />
  </ItemGroup>
  <ItemGroup>
    <PostDeploy Include="Script.PostDeployment.sql" />
  </ItemGroup>
  <!-- Explicitly exclude migration and script directories -->
  <ItemGroup>
    <None Remove="migrations\**" />
    <None Remove="scripts\**" />
  </ItemGroup>
</Project>
